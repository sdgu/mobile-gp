"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var router_1 = require("@angular/router");
var router_2 = require("nativescript-angular/router");
var gpserv_service_1 = require("../gpserv/gpserv.service");
var page_1 = require("ui/page");
var BbComponent = (function () {
    function BbComponent(route, router, routerExtensions, page) {
        var _this = this;
        this.route = route;
        this.router = router;
        this.routerExtensions = routerExtensions;
        this.page = page;
        this.dispArr = [];
        this.tapped = [];
        this.bbStr = "";
        this.route.queryParams.subscribe(function (params) {
            _this.dispArr = params["dispArr"];
            _this.tapped = params["tapArr"];
            var bbArr = _this.dispArr;
            var adds = [];
            var rems = [];
            var coms = [];
            var start = -1;
            var end = -1;
            var prev = _this.tapped[0];
            for (var i = 1; i < _this.dispArr.length; i++) {
                if (prev !== "add" && _this.tapped[i] === "add") {
                    start = i;
                    adds.push(start);
                }
                if (_this.tapped[i] !== "add" && prev === "add") {
                    end = i - 1;
                    adds.push(end);
                }
                prev = _this.tapped[i];
            }
            console.log(adds);
            for (var i = 1; i < _this.dispArr.length; i++) {
                if (prev !== "remove" && _this.tapped[i] === "remove") {
                    start = i;
                    rems.push(start);
                }
                if (_this.tapped[i] !== "remove" && prev === "remove") {
                    end = i - 1;
                    rems.push(end);
                }
                prev = _this.tapped[i];
            }
            console.log(rems);
            for (var i = 1; i < _this.dispArr.length; i++) {
                if (prev !== "comment" && _this.tapped[i] === "comment") {
                    start = i;
                    coms.push(start);
                }
                if (_this.tapped[i] !== "comment" && prev === "comment") {
                    end = i - 1;
                    coms.push(end);
                }
                prev = _this.tapped[i];
            }
            console.log(coms);
            for (var i = 0; i < adds.length; i += 2) {
                bbArr[adds[i]] = "[b][color='blue']" + bbArr[adds[i]];
                bbArr[adds[i + 1]] = bbArr[adds[i + 1]] + "[/color][/b]";
            }
            for (var i = 0; i < rems.length; i += 2) {
                bbArr[rems[i]] = "[s][b][color='red']" + bbArr[rems[i]];
                bbArr[rems[i + 1]] = bbArr[rems[i + 1]] + "[/color][/b][/s]";
            }
            for (var i = 0; i < coms.length; i += 2) {
                bbArr[coms[i]] = "[b][color='green']" + bbArr[coms[i]].replace("[c]", "");
                bbArr[coms[i + 1]] = bbArr[coms[i + 1]].replace("[/c]", "") + "[/color][/b]";
            }
            // for (let i = 0; i < this.dispArr.length; i++)
            // {
            // }
            _this.bbStr = bbArr.join(" ");
        });
    }
    BbComponent.prototype.arrToBB = function (d, t) {
    };
    BbComponent.prototype.goBack = function () {
        this.routerExtensions.back();
    };
    BbComponent = __decorate([
        core_1.Component({
            selector: "bb",
            // template: `
            //   <ActionBar title="My App" class="action-bar"></ActionBar>
            //   <!-- Your UI components go here -->
            // `
            templateUrl: "./bb/bb.component.html",
            styleUrls: ["./bb/bb.component.css", "./app.component.css"],
            providers: [gpserv_service_1.GpservService]
        }),
        __metadata("design:paramtypes", [router_1.ActivatedRoute, router_1.Router, router_2.RouterExtensions, page_1.Page])
    ], BbComponent);
    return BbComponent;
}());
exports.BbComponent = BbComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYmIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQWtEO0FBQ2xELDBDQUEyRTtBQUMzRSxzREFBOEQ7QUFDOUQsMkRBQXlEO0FBRXpELGdDQUErQjtBQXVCL0I7SUFhRSxxQkFBMkIsS0FBcUIsRUFBVSxNQUFjLEVBQVUsZ0JBQWtDLEVBQVUsSUFBVTtRQUF4SSxpQkF1RkU7UUF2RnlCLFVBQUssR0FBTCxLQUFLLENBQWdCO1FBQVUsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUFVLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFBVSxTQUFJLEdBQUosSUFBSSxDQUFNO1FBWHhJLFlBQU8sR0FBa0IsRUFBRSxDQUFDO1FBQzVCLFdBQU0sR0FBa0IsRUFBRSxDQUFDO1FBRTNCLFVBQUssR0FBVyxFQUFFLENBQUM7UUFVakIsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUM5QixVQUFBLE1BQU07WUFFSixLQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNqQyxLQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMvQixJQUFJLEtBQUssR0FBRyxLQUFJLENBQUMsT0FBTyxDQUFDO1lBQ3pCLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUNkLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUNkLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUNkLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ2YsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDYixJQUFJLElBQUksR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTFCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdB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QUE7WUFDMUUsQ0FBQztZQUNELGdEQUFnRDtZQUNoRCxJQUFJO1lBRUosSUFBSTtZQUVKLEtBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMvQixDQUFDLENBRUosQ0FBQTtJQUFBLENBQUM7SUE1RkYsNkJBQU8sR0FBUCxVQUFRLENBQWdCLEVBQUUsQ0FBZ0I7SUFHMUMsQ0FBQztJQTRGRCw0QkFBTSxHQUFOO1FBRUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxDQUFDO0lBQy9CLENBQUM7SUExR1UsV0FBVztRQVZ2QixnQkFBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLElBQUk7WUFDZCxjQUFjO1lBQ2QsOERBQThEO1lBQzlELHdDQUF3QztZQUN4QyxJQUFJO1lBQ0osV0FBVyxFQUFFLHdCQUF3QjtZQUNyQyxTQUFTLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxxQkFBcUIsQ0FBQztZQUMzRCxTQUFTLEVBQUUsQ0FBQyw4QkFBYSxDQUFDO1NBQzNCLENBQUM7eUNBY2tDLHVCQUFjLEVBQWtCLGVBQU0sRUFBNEIseUJBQWdCLEVBQWdCLFdBQUk7T0FiN0gsV0FBVyxDQTJHdkI7SUFBRCxrQkFBQztDQUFBLEFBM0dELElBMkdDO0FBM0dZLGtDQUFXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQgeyBSb3V0ZXIsIE5hdmlnYXRpb25FeHRyYXMsIEFjdGl2YXRlZFJvdXRlIH0gZnJvbSBcIkBhbmd1bGFyL3JvdXRlclwiO1xyXG5pbXBvcnQgeyBSb3V0ZXJFeHRlbnNpb25zIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC1hbmd1bGFyL3JvdXRlclwiXHJcbmltcG9ydCB7IEdwc2VydlNlcnZpY2UgfSBmcm9tIFwiLi4vZ3BzZXJ2L2dwc2Vydi5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCJ1aS90ZXh0LWZpZWxkXCI7XHJcbmltcG9ydCB7IFBhZ2UgfSBmcm9tIFwidWkvcGFnZVwiO1xyXG5pbXBvcnQge1xyXG4gICAgZ2V0Qm9vbGVhbixcclxuICAgIHNldEJvb2xlYW4sXHJcbiAgICBnZXROdW1iZXIsXHJcbiAgICBzZXROdW1iZXIsXHJcbiAgICBnZXRTdHJpbmcsXHJcbiAgICBzZXRTdHJpbmcsXHJcbiAgICBoYXNLZXksXHJcbiAgICByZW1vdmUsXHJcbiAgICBjbGVhclxyXG59IGZyb20gXCJhcHBsaWNhdGlvbi1zZXR0aW5nc1wiO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6IFwiYmJcIixcclxuICAvLyB0ZW1wbGF0ZTogYFxyXG4gIC8vICAgPEFjdGlvbkJhciB0aXRsZT1cIk15IEFwcFwiIGNsYXNzPVwiYWN0aW9uLWJhclwiPjwvQWN0aW9uQmFyPlxyXG4gIC8vICAgPCEtLSBZb3VyIFVJIGNvbXBvbmVudHMgZ28gaGVyZSAtLT5cclxuICAvLyBgXHJcbiAgdGVtcGxhdGVVcmw6IFwiLi9iYi9iYi5jb21wb25lbnQuaHRtbFwiLFxyXG4gIHN0eWxlVXJsczogW1wiLi9iYi9iYi5jb21wb25lbnQuY3NzXCIsIFwiLi9hcHAuY29tcG9uZW50LmNzc1wiXSxcclxuICBwcm92aWRlcnM6IFtHcHNlcnZTZXJ2aWNlXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgQmJDb21wb25lbnQgXHJcbntcclxuICBkaXNwQXJyOiBBcnJheTxzdHJpbmc+ID0gW107XHJcbiAgdGFwcGVkOiBBcnJheTxzdHJpbmc+ID0gW107XHJcblxyXG4gIGJiU3RyOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuXHJcbiAgYXJyVG9CQihkOiBBcnJheTxzdHJpbmc+LCB0OiBBcnJheTxzdHJpbmc+KVxyXG4gIHtcclxuXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSByb3V0ZTogQWN0aXZhdGVkUm91dGUsIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsIHByaXZhdGUgcm91dGVyRXh0ZW5zaW9uczogUm91dGVyRXh0ZW5zaW9ucywgcHJpdmF0ZSBwYWdlOiBQYWdlKVxyXG4gIHtcclxuICAgIHRoaXMucm91dGUucXVlcnlQYXJhbXMuc3Vic2NyaWJlKFxyXG4gICAgICBwYXJhbXMgPT5cclxuICAgICAge1xyXG4gICAgICAgIHRoaXMuZGlzcEFyciA9IHBhcmFtc1tcImRpc3BBcnJcIl07XHJcbiAgICAgICAgdGhpcy50YXBwZWQgPSBwYXJhbXNbXCJ0YXBBcnJcIl07XHJcbiAgICAgICAgbGV0IGJiQXJyID0gdGhpcy5kaXNwQXJyO1xyXG4gICAgICAgIGxldCBhZGRzID0gW107XHJcbiAgICAgICAgbGV0IHJlbXMgPSBbXTtcclxuICAgICAgICBsZXQgY29tcyA9IFtdO1xyXG4gICAgICAgIGxldCBzdGFydCA9IC0xO1xyXG4gICAgICAgIGxldCBlbmQgPSAtMTtcclxuICAgICAgICBsZXQgcHJldiA9IHRoaXMudGFwcGVkWzBdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuZGlzcEFyci5sZW5ndGg7IGkrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAocHJldiAhPT0gXCJhZGRcIiAmJiB0aGlzLnRhcHBlZFtpXSA9PT0gXCJhZGRcIilcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgc3RhcnQgPSBpO1xyXG4gICAgICAgICAgICBhZGRzLnB1c2goc3RhcnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHRoaXMudGFwcGVkW2ldICE9PSBcImFkZFwiICYmIHByZXYgPT09IFwiYWRkXCIpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGVuZCA9IGkgLSAxO1xyXG4gICAgICAgICAgICBhZGRzLnB1c2goZW5kKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgXHJcbiAgICAgICAgICBwcmV2ID0gdGhpcy50YXBwZWRbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGFkZHMpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5kaXNwQXJyLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChwcmV2ICE9PSBcInJlbW92ZVwiICYmIHRoaXMudGFwcGVkW2ldID09PSBcInJlbW92ZVwiKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBzdGFydCA9IGk7XHJcbiAgICAgICAgICAgIHJlbXMucHVzaChzdGFydCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAodGhpcy50YXBwZWRbaV0gIT09IFwicmVtb3ZlXCIgJiYgcHJldiA9PT0gXCJyZW1vdmVcIilcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZW5kID0gaSAtIDE7XHJcbiAgICAgICAgICAgIHJlbXMucHVzaChlbmQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICBcclxuICAgICAgICAgIHByZXYgPSB0aGlzLnRhcHBlZFtpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVtcyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmRpc3BBcnIubGVuZ3RoOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKHByZXYgIT09IFwiY29tbWVudFwiICYmIHRoaXMudGFwcGVkW2ldID09PSBcImNvbW1lbnRcIilcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgc3RhcnQgPSBpO1xyXG4gICAgICAgICAgICBjb21zLnB1c2goc3RhcnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHRoaXMudGFwcGVkW2ldICE9PSBcImNvbW1lbnRcIiAmJiBwcmV2ID09PSBcImNvbW1lbnRcIilcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZW5kID0gaSAtIDE7XHJcbiAgICAgICAgICAgIGNvbXMucHVzaChlbmQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICBcclxuICAgICAgICAgIHByZXYgPSB0aGlzLnRhcHBlZFtpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coY29tcyk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkcy5sZW5ndGg7IGkrPTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYmJBcnJbYWRkc1tpXV0gPSBcIltiXVtjb2xvcj0nYmx1ZSddXCIgKyBiYkFyclthZGRzW2ldXTtcclxuICAgICAgICAgIGJiQXJyW2FkZHNbaSsxXV0gPSBiYkFyclthZGRzW2krMV1dICsgXCJbL2NvbG9yXVsvYl1cIlxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbXMubGVuZ3RoOyBpKz0yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGJiQXJyW3JlbXNbaV1dID0gXCJbc11bYl1bY29sb3I9J3JlZCddXCIgKyBiYkFycltyZW1zW2ldXTtcclxuICAgICAgICAgIGJiQXJyW3JlbXNbaSsxXV0gPSBiYkFycltyZW1zW2krMV1dICsgXCJbL2NvbG9yXVsvYl1bL3NdXCJcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21zLmxlbmd0aDsgaSs9MilcclxuICAgICAgICB7XHJcbiAgICAgICAgICBiYkFycltjb21zW2ldXSA9IFwiW2JdW2NvbG9yPSdncmVlbiddXCIgKyBiYkFycltjb21zW2ldXS5yZXBsYWNlKFwiW2NdXCIsIFwiXCIpO1xyXG4gICAgICAgICAgYmJBcnJbY29tc1tpKzFdXSA9IGJiQXJyW2NvbXNbaSsxXV0ucmVwbGFjZShcIlsvY11cIiwgXCJcIikgKyBcIlsvY29sb3JdWy9iXVwiXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kaXNwQXJyLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAgIFxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgIHRoaXMuYmJTdHIgPSBiYkFyci5qb2luKFwiIFwiKTtcclxuICAgICAgfVxyXG4gICAgICAgIFxyXG4gICl9XHJcbiAgXHJcblxyXG4gIGdvQmFjaygpXHJcbiAge1xyXG4gICAgdGhpcy5yb3V0ZXJFeHRlbnNpb25zLmJhY2soKTtcclxuICB9XHJcbn0iXX0=